#################################
#      General Compositor Setup #
#################################

backend = "xrender";
vsync = true;
detect-rounded-corners = true;
detect-client-opacity = true;
use-damage = true;

#################################
#         Shadows & Blur        #
#################################

shadow = true;
shadow-radius = 12;
shadow-offset-x = -12;
shadow-offset-y = -12;
shadow-opacity = 0.5;
shadow-ignore-shaped = false;

blur-method = "dual_kawase";
blur-strength = 7;

#################################
#     Fading & Opacity Rules    #
#################################

fading = true;
fade-in-step = 0.03;
fade-out-step = 0.03;
fade-delta = 10;

inactive-opacity = 0.9;
active-opacity = 1.0;
frame-opacity = 0.9;
inactive-opacity-override = false;

#################################
#            Animations         #
#################################

animations = ({
    match = "window_type = 'normal'";
    triggers = ["close"];
    suppressions = [];
    opacity = {
        curve = "cubic-bezier(0,1,1,1)";
        duration = 0.3;
        start = "window-raw-opacity-before";
        end = 0;
    };
    blur-opacity = "opacity";
    shadow-opacity = "opacity";
    scale-x = {
        curve = "cubic-bezier(0,1.3,1,1)";
        duration = 0.3;
        start = 1;
        end = 0.6;
    };
    scale-y = "scale-x";
    offset-x = "(1 - scale-x) / 2 * window-width";
    offset-y = "(1 - scale-y) / 2 * window-height";
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
}, {
    match = "window_type = 'normal'";
    triggers = ["open"];
    suppressions = [];
    opacity = {
        curve = "cubic-bezier(0,1,1,1)";
        duration = 0.5;
        start = 0;
        end = "window-raw-opacity";
    };
    blur-opacity = "opacity";
    shadow-opacity = "opacity";
    scale-x = {
        curve = "cubic-bezier(0,1.3,1,1)";
        duration = 0.5;
        start = 0.6;
        end = 1;
    };
    scale-y = "scale-x";
    offset-x = "(1 - scale-x) / 2 * window-width";
    offset-y = "(1 - scale-y) / 2 * window-height";
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
}, {
    match = "window_type = 'normal'";
    triggers = ["geometry"];
    suppressions = [];
    scale-x = {
        curve = "cubic-bezier(0,0,0,1.28)";
        duration = 0.5;
        start = "window-width-before / window-width";
        end = 1;
    };
    scale-y = {
        curve = "cubic-bezier(0,0,0,1.28)";
        duration = 0.5;
        start = "window-height-before / window-height";
        end = 1;
    };
    offset-x = {
        curve = "cubic-bezier(0,0,0,1.28)";
        duration = 0.5;
        start = "window-x-before - window-x";
        end = 0;
    };
    offset-y = {
        curve = "cubic-bezier(0,0,0,1.28)";
        duration = 0.5;
        start = "window-y-before - window-y";
        end = 0;
    };
    shadow-scale-x = "scale-x";
    shadow-scale-y = "scale-y";
    shadow-offset-x = "offset-x";
    shadow-offset-y = "offset-y";
}, {
    match = "class_g = 'Rofi'";
    triggers = ["close", "hide"];
    suppressions = [];
    preset = "disappear";
    duration = 0.05;
    scale = 0.5;
}, {
    match = "class_g = 'Rofi'";
    triggers = ["open", "show"];
    suppressions = [];
    preset = "appear";
    duration = 0.2;
    scale = 0.5;
}, {
    match = "class_g = 'Dunst'";
    triggers = ["close", "hide"];
    suppressions = [];
    preset = "fly-out";
    direction = "up";
    duration = 0.2;
}, {
    match = "class_g = 'Dunst'";
    triggers = ["open", "show"];
    suppressions = [];
    preset = "fly-in";
    direction = "up";
    duration = 0.2;
});

#################################
#          Window Rules         #
#################################

wintypes:
{
    tooltip = { fade = true; shadow = true; opacity = 0.85; focus = true; };
    dock = { shadow = false; };
    dnd = { shadow = false; };
    popup_menu = { opacity = 0.9; };
    dropdown_menu = { opacity = 0.9; };
};


